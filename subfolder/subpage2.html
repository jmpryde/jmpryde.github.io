
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Text File Look</title>
    <style>
        body {
            background-color: #1e1e1e;
            color: #FFA500;
            font-family: "Menlo", "Monaco", "Courier New", monospace;
            font-size: 14px;
            line-height: 1.5;
            margin: 40px;
            max-width: 800px;
            white-space: pre-wrap;
        }

        /* Optional: Add a subtle shadow to make it look like a window */
        .text-container {
            background-color: #1e1e1e;
            padding: 20px;
            border-radius: 6px;
            box-shadow: 0 0 10px rgba(0,0,0,0.5);
        }
    </style>
</head>
<body>
<div class="text-container">
import sanitycheck:
 import tkinter as tk
from tkinter import ttk
import numpy as np
import matplotlib.pyplot as plt
from matplotlib.figure import Figure
from matplotlib.backends.backend_tkagg import FigureCanvasTkAgg

def update_function1(event=None):
    try:
        x1 = float(entry1.get() or 0)
        f = (x1/(2.3e8))**(-0.05)
        result1.config(text=f"Compute: {int(x1):,} petaflop/days → Isolated Loss = {f:.4f}")
        update_graph()
        update_estimated_loss()
    except ValueError:
        pass

def update_function2(event=None):
    try:
        x2 = float(entry2.get() or 0)
        g = (x2/(5.4e13))**(-0.095)
        result2.config(text=f"Dataset: {int(x2):,} tokens → Isolated Loss = {g:.4f}")
        update_graph()
        update_estimated_loss()
    except ValueError:
        pass

def update_function3(event=None):
    try:
        x3 = float(entry3.get() or 0)
        j = (x3/(8.8e13))**(-0.076)
        result3.config(text=f"Parameters: {int(x3):,} → Isolated Loss = {j:.4f}")
        update_graph()
        update_estimated_loss()
    except ValueError:
        pass

def update_graph():
    try:
        x1 = float(entry1.get() or 0)
        x2 = float(entry2.get() or 0)
        x3 = float(entry3.get() or 0)
        
        f = (x1/(2.3e8))**(-0.05)
        g = (x2/(5.4e13))**(-0.095)
        j = (x3/(8.8e13))**(-0.076)
        
        ax.clear()
        values = [f, g, j]
        bars = ax.bar(['Compute', 'Dataset', 'Parameters'], values)
        ax.set_ylabel('Scaling Factor')
        ax.set_title('Neural Scaling Laws')
        
        for bar in bars:
            height = bar.get_height()
            ax.text(bar.get_x() + bar.get_width()/2., height,
                   f'{height:.4f}',
                   ha='center', va='bottom')
        
        canvas.draw()
    except:
        pass

def update_estimated_loss():
    try:
        x1 = float(entry1.get() or 0)
        x2 = float(entry2.get() or 0)
        x3 = float(entry3.get() or 0)
        
        f = (x1/(2.3e8))**(-0.05)
        g = (x2/(5.4e13))**(-0.095)
        j = (x3/(8.8e13))**(-0.076)
        
        max_loss = max(f, g, j)
        estimated_loss.config(text=f"Estimated LM Configuration Loss: {max_loss:.4f}")
        
        # Determine the bottleneck
        if max_loss == f:
            bottleneck = "Compute"
        elif max_loss == g:
            bottleneck = "Dataset size"
        else:
            bottleneck = "Model size"
        
        bottleneck_label.config(text=f"Your model bottleneck is: {bottleneck}")
    except:
        pass

# Create main window
root = tk.Tk()
root.title("Power Law Functions")
root.geometry("600x400")

# First function
tk.Label(root, text="Enter your compute (petaflop/days)").pack(pady=(10,0))
entry1 = ttk.Entry(root)
entry1.pack(pady=(5,0))
entry1.insert(0, "1e6")  # Default value
result1 = tk.Label(root, text="f(x) = 0")
result1.pack(pady=(0,10))

# Second function
tk.Label(root, text="Enter your dataset size (tokens)").pack(pady=(10,0))
entry2 = ttk.Entry(root)
entry2.pack(pady=(5,0))
entry2.insert(0, "1e9")  # Default value
result2 = tk.Label(root, text="g(x) = 0")
result2.pack(pady=(0,10))

# Third function
tk.Label(root, text="Enter your non-embedding model parameters").pack(pady=(10,0))
entry3 = ttk.Entry(root)
entry3.pack(pady=(5,0))
entry3.insert(0, "1e7")  # Default value
result3 = tk.Label(root, text="j(x) = 0")
result3.pack(pady=(0,10))

# Results section
estimated_loss = tk.Label(root, text="Estimated LM Configuration Loss: 0", font=('Arial', 14, 'bold'))
estimated_loss.pack(pady=(20,5))  # More space above than below

bottleneck_label = tk.Label(root, text="Your model bottleneck is: None", font=('Arial', 14, 'bold'))
bottleneck_label.pack(pady=(5,20))  # More space below than above

# Replace the old bindings with new Return/Enter bindings
entry1.bind('<Return>', update_function1)
entry2.bind('<Return>', update_function2)
entry3.bind('<Return>', update_function3)

# Initial update for each function
update_function1()
update_function2()
update_function3()

root.mainloop()

</div>
</body>
</html>
